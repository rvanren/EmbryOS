Added keyboard input and blocking
